<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Snake | Snekanth Babu</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-body: #fdfbf7;
            --text-primary: #1c1917;
            --accent-orange: #d97706;
            --snake-color: #57534e;
            --food-color: #d97706;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
            /* Prevent scrolling controls */
            touch-action: none;
            /* Prevent zoom/scroll on mobile */
        }

        h1 {
            margin-bottom: 10px;
            font-weight: 700;
        }

        .score-board {
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        canvas {
            background: #f2f0e9;
            border: 4px solid var(--text-primary);
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 95vw;
            max-height: 70vh;
        }

        .controls-hint {
            margin-top: 20px;
            color: #57534e;
            font-size: 0.9rem;
        }

        .btn-back {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: var(--text-primary);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
        }

        .game-over-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: none;
        }

        button {
            padding: 12px 24px;
            background: var(--accent-orange);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 15px;
            font-family: inherit;
            font-weight: 600;
        }
    </style>
</head>

<body>

    <a href="../../games.html" class="btn-back">‚Üê Back</a>

    <h1>Pro Snake</h1>
    <div class="score-board">Score: <span id="score">0</span></div>

    <canvas id="gameCanvas" width="400" height="400"></canvas>

    <p class="controls-hint">Use Arrow Keys or Swipe to Play</p>

    <div class="game-over-modal" id="gameOverModal">
        <h2>Game Over!</h2>
        <p style="margin: 10px 0;">Your Score: <span id="finalScore">0</span></p>
        <button onclick="resetGame()">Play Again</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const finalScoreElement = document.getElementById('finalScore');
        const modal = document.getElementById('gameOverModal');

        let tileCount = 20;
        let gridSize = canvas.width / tileCount;
        let headX = 10;
        let headY = 10;
        let velocityX = 0;
        let velocityY = 0;
        let appleX = 5;
        let appleY = 5;
        let trail = [];
        let tail = 5;
        let score = 0;
        let gameRunning = true;

        // Game Loop
        setInterval(game, 1000 / 10); // 10 FPS

        function game() {
            if (!gameRunning) return;

            headX += velocityX;
            headY += velocityY;

            // Wrap walls
            if (headX < 0) headX = tileCount - 1;
            if (headX > tileCount - 1) headX = 0;
            if (headY < 0) headY = tileCount - 1;
            if (headY > tileCount - 1) headY = 0;

            // Background
            ctx.fillStyle = '#f2f0e9';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Snake
            ctx.fillStyle = '#57534e';
            for (let i = 0; i < trail.length; i++) {
                ctx.fillRect(trail[i].x * gridSize, trail[i].y * gridSize, gridSize - 2, gridSize - 2);
                if (trail[i].x === headX && trail[i].y === headY && (velocityX !== 0 || velocityY !== 0)) {
                    gameOver();
                }
            }

            trail.push({ x: headX, y: headY });
            while (trail.length > tail) {
                trail.shift();
            }

            // Apple
            ctx.fillStyle = '#d97706';
            ctx.beginPath();
            ctx.arc((appleX * gridSize) + gridSize / 2, (appleY * gridSize) + gridSize / 2, gridSize / 3, 0, Math.PI * 2);
            ctx.fill();

            // Eat Apple
            if (appleX === headX && appleY === headY) {
                tail++;
                score += 10;
                scoreElement.innerText = score;
                appleX = Math.floor(Math.random() * tileCount);
                appleY = Math.floor(Math.random() * tileCount);
            }
        }

        function gameOver() {
            gameRunning = false;
            finalScoreElement.innerText = score;
            modal.style.display = 'block';
        }

        window.resetGame = function () {
            headX = 10; headY = 10;
            velocityX = 0; velocityY = 0;
            trail = [];
            tail = 5;
            score = 0;
            scoreElement.innerText = 0;
            gameRunning = true;
            modal.style.display = 'none';
        }

        // Keyboard Controls
        document.addEventListener('keydown', keyPush);
        function keyPush(evt) {
            if (!gameRunning) return;
            switch (evt.keyCode) {
                case 37: // Left
                    if (velocityX !== 1) { velocityX = -1; velocityY = 0; }
                    break;
                case 38: // Up
                    if (velocityY !== 1) { velocityX = 0; velocityY = -1; }
                    break;
                case 39: // Right
                    if (velocityX !== -1) { velocityX = 1; velocityY = 0; }
                    break;
                case 40: // Down
                    if (velocityY !== -1) { velocityX = 0; velocityY = 1; }
                    break;
            }
        }

        // Touch Controls
        let touchStartX = 0;
        let touchStartY = 0;

        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }, { passive: false });

        document.addEventListener('touchend', e => {
            if (!gameRunning) return;
            let touchEndX = e.changedTouches[0].screenX;
            let touchEndY = e.changedTouches[0].screenY;

            let dx = touchEndX - touchStartX;
            let dy = touchEndY - touchStartY;

            if (Math.abs(dx) > Math.abs(dy)) {
                if (dx > 0 && velocityX !== -1) { velocityX = 1; velocityY = 0; }
                else if (dx < 0 && velocityX !== 1) { velocityX = -1; velocityY = 0; }
            } else {
                if (dy > 0 && velocityY !== -1) { velocityX = 0; velocityY = 1; }
                else if (dy < 0 && velocityY !== 1) { velocityX = 0; velocityY = -1; }
            }
        }, { passive: false });

    </script>
</body>

</html>